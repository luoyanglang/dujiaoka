---
inclusion: always
---

# 开发规范

## 📝 代码规范

### 命名规范
- **变量**: 小写+下划线，如 `user_name`, `total_count`
- **函数**: 动词开头，如 `get_user()`, `calculate_price()`
- **类**: 大驼峰，如 `UserService`, `OrderManager`
- **常量**: 大写+下划线，如 `MAX_CONNECTIONS`, `API_BASE_URL`

### 函数规范
- 函数不超过 50 行
- 参数不超过 5 个
- 单一职责原则
- 复杂逻辑必须注释

### 避免的写法
- ❌ 魔法数字（使用常量）
- ❌ 深层嵌套（提前返回）
- ❌ 重复代码（提取公共逻辑）
- ❌ 硬编码敏感信息（使用环境变量）

## 🔀 Git 提交规范

### 标准格式
```
<类型>: <简短描述>

<详细描述>（可选）
```

### 常用类型
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `refactor`: 重构
- `perf`: 性能优化
- `test`: 测试
- `chore`: 构建/工具

### 示例
```bash
feat: 新增用户登录功能
fix: 修复数据库连接超时
docs: 更新API文档
```

## 📁 目录规范

### 文件存放位置
- **文档**: `docs/`
- **测试**: `tests/`
- **脚本**: `scripts/`
- **配置**: `config/` 或项目根目录
- **数据**: `data/`

### 禁止事项
- ❌ 根目录散落 .md 文件（除了 README.md）
- ❌ 根目录散落 .py/.sh 脚本
- ❌ 提交临时文件（test1.py, temp.txt）
- ❌ 提交敏感信息（.env, *.db, *.log）

## 📚 文档更新规范

### 核心原则
**更新现有文档，不要新建文档！**

### 必须更新的文档
1. **完成功能后**: 更新 `docs/项目完整总结.md`
2. **修改API后**: 更新 `docs/API接口完整统计.md`
3. **部署变更**: 更新 `docs/KIRO协作开发流程.md`

### 禁止创建的文档
- ❌ 功能完成总结.md
- ❌ 开发日志.md
- ❌ 修复记录.md
- ❌ 任何带"总结"、"记录"、"日志"的文档

## 🔒 安全规范

### 不要硬编码
```python
# ❌ 错误
password = "123456"
api_key = "sk-xxxxx"

# ✅ 正确
import os
password = os.getenv("PASSWORD")
api_key = os.getenv("API_KEY")
```

### 输入验证
```python
def get_user(user_id):
    if not isinstance(user_id, int):
        raise ValueError("user_id必须是整数")
    if user_id <= 0:
        raise ValueError("user_id必须大于0")
    # 查询用户
```

### SQL注入防护
```python
# ❌ 字符串拼接
query = f"SELECT * FROM users WHERE id = {user_id}"

# ✅ 参数化查询
query = "SELECT * FROM users WHERE id = ?"
cursor.execute(query, (user_id,))
```
